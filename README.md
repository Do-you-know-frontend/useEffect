# useEffectì™€ useEffect ì‹¤í–‰ ìˆœì„œ

# useEffect í›…ì´ë€?

ì»´í¬ë„ŒíŠ¸ê°€Â ë Œë”ë§Â ë Â ë•ŒÂ íŠ¹ì •Â ì‘ì—…ì„Â ì‹¤í–‰í• Â ìˆ˜Â ìˆë„ë¡Â í•˜ëŠ”Â Hookì´ë‹¤.

ì¼ë°˜ì ìœ¼ë¡œ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” **Side Effect**ë¥¼ ì²˜ë¦¬í•  ë•Œ **react** ëª¨ë“ˆì—ì„œ ì œê³µí•˜ëŠ” `useEffect`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

![Untitled](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/3dcba8cd-4f4f-4429-9cd2-2670d5e11378/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230117T104830Z&X-Amz-Expires=86400&X-Amz-Signature=07e62ecc9f29f3b314487d2a2097ade3a289b980de812254464830cb012ef1cd&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

react ê³µì‹ë¬¸ì„œì— ë”°ë¥´ë©´, `useEffect` ëŠ” ë Œë”ë§ ì´í›„ì— ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ì§€ë¥¼ ë§í•´ì¤€ë‹¤ê³  í•œë‹¤.

## ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

`useEffect`Â Hookì€Â `dependency` ë°°ì—´ ë‚´ì— ì§€ì •ëœ ê°’ì˜ ë³€í™”ê°€ ì¼ì–´ë‚¬ì„ ë•Œ ì´í™íŠ¸ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ APIë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜,Â `state` Â ê°’ ë˜ëŠ”Â `props` Â ê°’ì´ ë³€ê²½ë  ë•Œ íŠ¹ì • í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ë“±ì˜ ì‘ì—…ì„ í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.

## ****useEffect ì˜ dependency array****

### **ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ê²ƒ ë°©ì§€**

ì´í™íŠ¸ê°€ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë‘ ë²ˆì§¸ ì¸ìì— ê°’ì„ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤. ì´ ë°°ì—´ì€ ì´í™íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ìœ„í•œ ì˜ì¡´ì„± ë°°ì—´ì´ë‹¤. ë°°ì—´ ë‚´ì— ì‘ì„±ëœ ê°’ ì¤‘ í•˜ë‚˜ê°€ ë³€ê²½ëœ ê²½ìš° ì´í™íŠ¸ê°€ ì‹¤í–‰ëœë‹¤.

```jsx
const [value, setValue] = useState(0);
 
React.useEffect(() => {
  // ì´í™íŠ¸ì—ì„œ 'value' ê°’ì„ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤.
  // dependency ë°°ì—´ì— 'value' ê°’ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
  console.log(value);
}, [value]);  // 'value' ê°’ì´ ë³€ê²½ë  ë•Œ ì´í™íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
```

### **ë§ˆìš´íŠ¸ì‹œì— í•œ ë²ˆë§Œ ì‹¤í–‰**

ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ê³ , ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì •ë¦¬ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œÂ `useEffect`ì˜ `dependency` ë°°ì—´ì— ë¹ˆ ê°’(`[]`)ì„ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

```jsx
React.useEffect(() => {
  console.log('component mounted');
 
  return () => console.log('component unmounting');
}, []);
```

ì»´í¬ë„ŒíŠ¸ëŠ” ìµœì´ˆ ë Œë”ë§ ì´í›„ '`component mounted`' í…ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•  ê²ƒì´ê³ , ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë˜ëŠ” ì‹œì ì— '`component unmounting`' í…ìŠ¤íŠ¸ê°€ ì¶œë ¥ëœë‹¤.

ì´í™íŠ¸ í•¨ìˆ˜ ë‚´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°’ì´ ìˆìŒì—ë„ ì˜ì¡´ì„± ë°°ì—´ì„ ë¹„ì›Œë†“ëŠ” ê²½ìš° ì˜ë„ì¹˜ ì•Šì€ ë²„ê·¸ê°€ ìƒê¸¸ ìˆ˜ ìˆìŒì— ìœ ì˜í•´ì•¼ í•œë‹¤.

## useEffect ì‹¤í–‰ìˆœì„œ

`useEffect`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ëœ ì´í›„ì— ì‹¤í–‰ëœë‹¤.
ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ì¡´ì¬í•œë‹¤ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ì˜ `useEffect`ê°€ ë¨¼ì € ì‹¤í–‰ ëœ í›„ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ `useEffect`ê°€ ì‹¤í–‰ëœë‹¤.
ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ì™„ì „íˆ ë Œë”ë§ ë ë ¤ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë¨¼ì € ë Œë”ë§ì´ ì™„ë£Œ ë˜ì–´ì•¼ ê°€ëŠ¥í•œ ê²ƒì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

ë‹¤ìŒì˜ ì½”ë“œëŠ” ì–´ë–»ê²Œ ì‹¤í–‰ì´ ë ê¹Œ?

```jsx
function App() {
  useEffect(() => {
    console.log(1);
  }, []);

  return <OuterBox/>
}

const OuterBox: FC = () => {
  useEffect(() => {
    console.log(2);
  }, []);

  return <InnerBox/>
};

const InnerBox: FC = () => {
  useEffect(() => {
    console.log(3);
  }, []);

  return ...
};
```

í•˜ìœ„ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ ë¨¼ì € ì‹¤í–‰ëœë‹¤.

```jsx
//ì‹¤í–‰ê²°ê³¼
3
2
1
```

`useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ì´ ëœ í›„ì— ì‹¤í–‰ë˜ëŠ” ê²ƒì´ë‹¤.Â 

`App`ì´Â `render`ë˜ê¸° ìœ„í•´ì„œÂ `OuterBox`ê°€ ë¨¼ì € ë Œë”ë§ì´ ë˜ì–´ì•¼ ë˜ê³ ,Â `OuterBox`ê°€ ì™„ì „íˆ ë Œë”ë§ ë˜ê¸° ìœ„í•´ì„œëŠ”Â `InnerBox`ê°€ ë Œë”ë§ì´ ë˜ì–´ì•¼ í•œë‹¤.

### return ë¬¸ì´ useEffect ë³´ë‹¤ ë¨¼ì € ì½íŒë‹¤.

ì•„ë˜ì˜ ì½”ë“œ ê²°ê³¼ëŠ” `return` -> `useEffect` ìˆœì´ë‹¤!

```jsx
import { useEffect, useState } from 'react';

function Detail() {

  useEffect(() => {
    console.log(`useEffect`);
  }, []);

  return (
    <div>
      {
        console.log(`return`)
      }
    </div>
  )
}
export default Detail;
```

ê·¸ ê²ƒì€ ì™œì¼ê¹Œ?

`useEffect` ìì²´ê°€ ì›ë˜ `return` í›„ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ë˜í•œ, `A` í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì™€ `B` í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆê³ , `A`ì—ì„œ `B`ë¡œ ë¼ìš°í„° ì´ë™ì„ í•œë‹¤ê³  ê°€ì •í•  ë•Œ, ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì‹¤í–‰ì´ ëœë‹¤.

1. `A`ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

2. `A`ì»´í¬ë„ŒíŠ¸ì˜ `useEffect` ì‹¤í–‰

3. `A`>> `B`ë¡œ í˜ì´ì§€ ì´ë™ í•˜ë©´

4. `B`ì»´í¬ë„ŒíŠ¸ ë Œë”ë§

5. `A`ì»´í¬ë„ŒíŠ¸ `useEffect return` ì‹¤í–‰

6. `B`ì»´í¬ë„ŒíŠ¸ `useEffect` ì‹¤í–‰

## ****useEffectì˜ cleanup í•¨ìˆ˜****

****`useEffectÂ  hook` ì—ì„œ `return`ì‹œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜**

- `cleanup` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë Œë”ë§ì´ ë  ë•Œ, ì´ì „ì— ë‚¨ì€ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì¼ì–´ë‚˜ëŠ” ì¼ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.
- useEffectë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ side effectë¥¼ ìˆ˜í–‰í•˜ëŠ”ë°, ì´ë•Œ ë Œë”ë§ì´ ë°œìƒì‹œ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.ğŸ  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°, êµ¬ë… ì„¤ì •, ìˆ˜ë™ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ DOMì„ ìˆ˜ì •í•˜ëŠ” ê²ƒì´Â **side effects**ì´ë‹¤.
- íŠ¹íˆ ë¼ìš°í„°ì™€ useEffect í›…ì„ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ë©´ ì´ë¥¼ ê³ ë ¤í•´ì•¼í•œë‹¤.

`useEffect`ì˜ ì´í™íŠ¸ í•¨ìˆ˜ì—ì„œ ë°˜í™˜ë˜ëŠ” `cleanup` í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ `unmount`ë˜ëŠ” ì‹œì ì—ë§Œ ì‹¤í–‰ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. `cleanup` í•¨ìˆ˜ëŠ” ì´í™íŠ¸ê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ë§¤ë²ˆ í˜¸ì¶œë˜ë©°, ì»´í¬ë„ŒíŠ¸ê°€ `unmount`ë  ë•Œ ì—­ì‹œ ì‹¤í–‰ë  ë•Œ ì •ë¦¬ëœë‹¤. í•„ìš”ì— ë”°ë¼ ëª¨ë“  ë Œë”ë§ ì „í›„ì— ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œÂ `componentWillUnmount`ë³´ë‹¤ ë” ìì£¼ í˜¸ì¶œëœë‹¤.

### useEffect ë¦¬í„´í•¨ìˆ˜ ë™ì‘ ìˆœì„œ

1. `props`ë‚˜ `state`ê°€ ì—…ë°ì´íŠ¸

2. ì»´í¬ë„ŒíŠ¸Â **ë¦¬ë Œë”ë§**

3. ì´ì „ ì´í™íŠ¸Â **í´ë¦°ì—…**

4. ìƒˆë¡œìš´ ì´í™íŠ¸ ì‹¤í–‰

`props.id`ê°€ 10ì—ì„œ `props.id`ê°€ 20ìœ¼ë¡œ ì—…ë°ì´íŠ¸ ëœ ìƒí™©

1. `props.id` = 20ìœ¼ë¡œ ë³€ê²½

2. ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§

3. ì´ì „ ì´í™íŠ¸ í´ë¦°ì—… (ì´ ì´í™íŠ¸ í•¨ìˆ˜ëŠ”Â **`props.id = 10`**ì„ ë°”ë¼ë³´ê³  ìˆë‹¤.)

4. ìƒˆë¡œìš´ ì´í™íŠ¸ ì‹¤í–‰ (ì´ ì´í™íŠ¸ í•¨ìˆ˜ëŠ”Â **`props.id = 20`**ì„ ë°”ë¼ë³´ê³  ìˆë‹¤.)

ì»´í¬ë„ŒíŠ¸ë¥¼ ë¦¬ë Œë”ë§ í•˜ê¸° ì „ì— í´ë¦°ì—… ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼Â **ë¦¬ë Œë”ë§ì´ ë˜ê³  ë‚œ ë‹¤ìŒì— í´ë¦°ì—…**
ë˜ê³  ê·¸ ë‹¤ìŒ ì´í™íŠ¸ê°€ ìƒˆë¡œ ì‹¤í–‰ì´ ëœë‹¤.

### ì •ë¦¬

ë¦¬ë Œë”ë§ -> ì´ì „ ì´í™íŠ¸ í´ë¦°ì—… -> ì´í™íŠ¸ ì‹¤í–‰

1. `useEffect`í•¨ìˆ˜ì˜ `SideEffect`í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê¸° ì „ì—ëŠ” ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.
2. ëª¨ë“  `SideEffect`í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê¸° ì „ ì‘ë™í•œë‹¤.
